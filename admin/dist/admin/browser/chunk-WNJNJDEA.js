import{t as a}from"./chunk-XJI6OOWZ.js";import{M as i,Q as n,U as o}from"./chunk-AYG5IDLV.js";var c=class r{constructor(e){this.api=e}_currentUser=null;get currentUser(){return this._currentUser}setUser(e){this._currentUser=e}clearUser(){this._currentUser=null}get isLoggedIn(){return!!this._currentUser}get isManager(){return this._currentUser?.role==="manager"||this._currentUser?.role==="admin"}login(e,t){return this.api.post("/auth/login",{email:e,password:t}).pipe(i(s=>{localStorage.setItem("accessToken",s.accessToken),localStorage.setItem("refreshToken",s.refreshToken),this._currentUser=s.user}))}logout(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),this._currentUser=null}getMe(){return this.api.get("/users/me").pipe(i(e=>{this._currentUser=e}))}static \u0275fac=function(t){return new(t||r)(o(a))};static \u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"})};export{c as a};
