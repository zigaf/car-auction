import{a as G}from"./chunk-T45MH3OG.js";import{f as V}from"./chunk-VAT4CJ43.js";import{b as D,c as j,f as N,i as W,j as $,k as R,p as U}from"./chunk-WU5N6ZY2.js";import"./chunk-XXMQUF42.js";import{i as I,j as A}from"./chunk-H2AGEXJJ.js";import{$ as b,$a as O,Bb as T,Db as C,Eb as M,Fb as F,Ma as z,V as L,Ya as g,Za as p,_ as x,ab as P,bb as h,cb as u,db as n,eb as i,fb as y,gb as v,jb as m,kb as d,rb as o,sb as _,tb as f,ua as B,ub as E,wa as l,xb as S,yb as w,zb as k}from"./chunk-G2PPXY4B.js";var J=e=>["/lots",e],K=(e,a)=>a.id;function Q(e,a){if(e&1&&(n(0,"option",8),o(1),i()),e&2){let t=a.$implicit,r=d();u("value",t),l(),_(r.statusLabels[t])}}function X(e,a){if(e&1&&(n(0,"div",9)(1,"span",11),o(2,"error"),i(),o(3),i()),e&2){let t=d();l(3),f(" ",t.error," ")}}function Y(e,a){e&1&&(n(0,"div",10)(1,"span",12),o(2,"progress_activity"),i()())}function Z(e,a){if(e&1&&y(0,"img",19),e&2){let t=d().$implicit;u("src",t.images[0].url,B)("alt",t.title)}}function tt(e,a){e&1&&(n(0,"span",11),o(1,"directions_car"),i())}function et(e,a){if(e&1&&(o(0),C(1,"number")),e&2){let t=d().$implicit;f(" ",M(1,1,t.currentBid)," EUR ")}}function nt(e,a){if(e&1&&(o(0),C(1,"number")),e&2){let t=d().$implicit;f(" ",M(1,1,t.startingBid)," EUR ")}}function it(e,a){e&1&&o(0," \u2014 ")}function ot(e,a){if(e&1&&(n(0,"option",24),o(1),i()),e&2){let t=a.$implicit,r=d().$implicit,c=d(2);u("value",t)("selected",r.status===t),l(),_(c.statusLabels[t])}}function at(e,a){if(e&1){let t=v();n(0,"tr")(1,"td",17)(2,"div",18),g(3,Z,1,2,"img",19)(4,tt,2,0,"span",11),i(),n(5,"div")(6,"div",20),o(7),i(),n(8,"div",21),o(9),i()()(),n(10,"td"),o(11),i(),n(12,"td"),o(13),C(14,"number"),i(),n(15,"td",22),g(16,et,2,3)(17,nt,2,3)(18,it,1,0),i(),n(19,"td")(20,"select",23),m("change",function(c){let s=x(t).$implicit,H=d(2);return b(H.updateStatus(s,c.target.value))}),P(21,ot,2,3,"option",24,O),i()(),n(23,"td",25),o(24),C(25,"date"),i(),n(26,"td",26)(27,"a",27)(28,"span",11),o(29,"open_in_new"),i()(),n(30,"button",28),m("click",function(){let c=x(t).$implicit,s=d(2);return b(s.deleteLot(c.id))}),n(31,"span",11),o(32,"delete"),i()()()()}if(e&2){let t=a.$implicit,r=d(2);l(3),p(t.images&&t.images.length>0?3:4),l(4),E("",t.brand," ",t.model),l(2),f("",t.id.slice(0,8),"\u2026"),l(2),_(t.year),l(2),f("",M(14,10,t.mileage)," \u043A\u043C"),l(3),p(t.currentBid?16:t.startingBid?17:18),l(4),u("value",t.status),l(),h(r.statuses.slice(1)),l(3),_(F(25,12,t.createdAt,"dd.MM.yy")),l(3),u("routerLink",T(15,J,t.id))}}function rt(e,a){e&1&&(n(0,"div",15)(1,"span",11),o(2,"inbox"),i(),n(3,"p"),o(4,"\u041B\u043E\u0442\u044B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B"),i()())}function lt(e,a){if(e&1){let t=v();n(0,"div",16)(1,"button",29),m("click",function(){x(t);let c=d(2);return b(c.prevPage())}),n(2,"span",11),o(3,"chevron_left"),i()(),n(4,"span",30),o(5),i(),n(6,"button",29),m("click",function(){x(t);let c=d(2);return b(c.nextPage())}),n(7,"span",11),o(8,"chevron_right"),i()()()}if(e&2){let t=d(2);l(),u("disabled",t.page===1),l(4),E("",t.page," / ",t.totalPages),l(),u("disabled",t.page===t.totalPages)}}function ct(e,a){if(e&1&&(n(0,"div",13)(1,"table",14)(2,"thead")(3,"tr")(4,"th"),o(5,"\u041B\u043E\u0442"),i(),n(6,"th"),o(7,"\u0413\u043E\u0434"),i(),n(8,"th"),o(9,"\u041F\u0440\u043E\u0431\u0435\u0433"),i(),n(10,"th"),o(11,"\u0421\u0442\u0430\u0432\u043A\u0430"),i(),n(12,"th"),o(13,"\u0421\u0442\u0430\u0442\u0443\u0441"),i(),n(14,"th"),o(15,"\u0421\u043E\u0437\u0434\u0430\u043D"),i(),y(16,"th"),i()(),n(17,"tbody"),P(18,at,33,17,"tr",null,K),i()()(),g(20,rt,5,0,"div",15),g(21,lt,9,4,"div",16)),e&2){let t=d();l(18),h(t.lots),l(2),p(t.lots.length===0?20:-1),l(),p(t.totalPages>1?21:-1)}}var dt={imported:"\u0418\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D",active:"\u0410\u043A\u0442\u0438\u0432\u043D\u044B\u0439",trading:"\u0422\u043E\u0440\u0433\u0438",sold:"\u041F\u0440\u043E\u0434\u0430\u043D",cancelled:"\u041E\u0442\u043C\u0435\u043D\u0451\u043D"},st={imported:"badge--gray",active:"badge--blue",trading:"badge--green",sold:"badge--amber",cancelled:"badge--red"},q=class e{lotService=L(G);lots=[];loading=!0;error="";total=0;page=1;limit=20;filterStatus="";filterSearch="";statuses=["","imported","active","trading","sold","cancelled"];statusLabels=dt;statusBadge=st;ngOnInit(){this.load()}load(){this.loading=!0,this.error="",this.lotService.getLots({page:this.page,limit:this.limit,status:this.filterStatus||void 0,search:this.filterSearch||void 0}).subscribe({next:a=>{this.lots=a.data,this.total=a.total,this.loading=!1},error:()=>{this.error="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u043B\u043E\u0442\u044B",this.loading=!1}})}onFilterChange(){this.page=1,this.load()}prevPage(){this.page>1&&(this.page--,this.load())}nextPage(){this.page*this.limit<this.total&&(this.page++,this.load())}get totalPages(){return Math.ceil(this.total/this.limit)}updateStatus(a,t){this.lotService.updateStatus(a.id,t).subscribe({next:r=>{let c=this.lots.findIndex(s=>s.id===r.id);c!==-1&&(this.lots[c]=r)}})}deleteLot(a){confirm("\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043B\u043E\u0442? \u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043E\u0431\u0440\u0430\u0442\u0438\u043C\u043E.")&&this.lotService.deleteLot(a).subscribe({next:()=>{this.lots=this.lots.filter(t=>t.id!==a),this.total--}})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=z({type:e,selectors:[["app-lots"]],decls:16,vars:6,consts:[[1,"page"],[1,"page-header"],[1,"page-title"],[1,"page-count"],[1,"filters"],["type","text","placeholder","\u041F\u043E\u0438\u0441\u043A \u043F\u043E \u043C\u0430\u0440\u043A\u0435, \u043C\u043E\u0434\u0435\u043B\u0438...",1,"form-control","filters__search",3,"ngModelChange","input","ngModel"],[1,"form-control","filters__select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value"],[1,"state-error"],[1,"state-loading"],[1,"material-symbols-rounded"],[1,"material-symbols-rounded","spin"],[1,"table-wrap"],[1,"data-table"],[1,"empty-state"],[1,"pagination"],[1,"lot-cell"],[1,"lot-cell__image"],[3,"src","alt"],[1,"lot-cell__name"],[1,"lot-cell__id","mono"],[1,"mono"],[1,"status-select",3,"change","value"],[3,"value","selected"],[1,"text-muted"],[1,"actions-cell"],["title","\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u043B\u043E\u0442",1,"btn","btn--icon",3,"routerLink"],["title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043B\u043E\u0442",1,"btn","btn--icon",3,"click"],[1,"btn","btn--secondary","btn--sm",3,"click","disabled"],[1,"pagination__info"]],template:function(t,r){t&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"\u041B\u043E\u0442\u044B"),i(),n(4,"span",3),o(5),i()(),n(6,"div",4)(7,"input",5),k("ngModelChange",function(s){return w(r.filterSearch,s)||(r.filterSearch=s),s}),m("input",function(){return r.onFilterChange()}),i(),n(8,"select",6),k("ngModelChange",function(s){return w(r.filterStatus,s)||(r.filterStatus=s),s}),m("change",function(){return r.onFilterChange()}),n(9,"option",7),o(10,"\u0412\u0441\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u044B"),i(),P(11,Q,2,2,"option",8,O),i()(),g(13,X,4,1,"div",9),g(14,Y,3,0,"div",10),g(15,ct,22,2),i()),t&2&&(l(5),_(r.total),l(2),S("ngModel",r.filterSearch),l(),S("ngModel",r.filterStatus),l(3),h(r.statuses.slice(1)),l(2),p(r.error?13:-1),l(),p(r.loading?14:-1),l(),p(!r.loading&&!r.error?15:-1))},dependencies:[U,$,R,D,W,j,N,V,A,I],styles:[".page[_ngcontent-%COMP%]{padding:32px;max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:32px}.page-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#111827}.page-count[_ngcontent-%COMP%]{font-size:.8125rem;color:#6b7280;background:#f3f4f6;padding:2px 10px;border-radius:20px}.filters[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:24px;flex-wrap:wrap}.filters__search[_ngcontent-%COMP%]{flex:1;min-width:200px}.filters__select[_ngcontent-%COMP%]{min-width:160px;width:auto}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;background:#f8f9fb;color:#111827;font-family:Manrope,-apple-system,BlinkMacSystemFont,sans-serif;font-size:.875rem;border:1px solid #E5E7EB;border-radius:8px;transition:border-color .15s ease,box-shadow .15s ease;outline:none}.form-control[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.form-control[_ngcontent-%COMP%]:focus{border-color:#4f46e5;box-shadow:0 0 0 3px #4f46e514}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:8px 12px;border:none;border-radius:8px;font-family:Manrope,-apple-system,BlinkMacSystemFont,sans-serif;font-size:.8125rem;font-weight:600;cursor:pointer;transition:all .15s ease}.btn--primary[_ngcontent-%COMP%]{background:#4f46e5;color:#fff}.btn--primary[_ngcontent-%COMP%]:hover{background:#4338ca;box-shadow:0 4px 14px #4f46e540}.btn--primary[_ngcontent-%COMP%]:active{background:#3730a3}.btn--secondary[_ngcontent-%COMP%]{background:transparent;color:#111827;border:1px solid #E5E7EB}.btn--secondary[_ngcontent-%COMP%]:hover{border-color:#d1d5db;background:#f3f4f6}.btn--danger[_ngcontent-%COMP%]{background:#ef444414;color:#ef4444;border:1px solid rgba(239,68,68,.2)}.btn--danger[_ngcontent-%COMP%]:hover{background:#ef444426}.btn--ghost[_ngcontent-%COMP%]{background:none;color:#6b7280}.btn--ghost[_ngcontent-%COMP%]:hover{color:#111827;background:#f3f4f6}.btn--sm[_ngcontent-%COMP%]{padding:4px 10px;font-size:.6875rem}.btn--icon[_ngcontent-%COMP%]{padding:4px;background:none;color:#6b7280;border:none;border-radius:4px;display:flex;align-items:center}.btn--icon[_ngcontent-%COMP%]:hover{color:#111827;background:#f3f4f6}.btn--icon[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:18px}.btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.btn[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:16px;flex-shrink:0}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:2px 8px;border-radius:20px;font-size:.6875rem;font-weight:600}.badge--green[_ngcontent-%COMP%]{background:#22c55e1a;color:#1a9a49}.badge--red[_ngcontent-%COMP%]{background:#ef44441a;color:#ec1e1e}.badge--amber[_ngcontent-%COMP%]{background:#f59e0b1f;color:#c57f08}.badge--blue[_ngcontent-%COMP%]{background:#3b82f61a;color:#1469f4}.badge--gray[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280}.table-wrap[_ngcontent-%COMP%]{background:#fff;border:1px solid #E5E7EB;border-radius:16px;overflow:hidden;box-shadow:0 1px 2px #0000000d}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:8px 16px;text-align:left;font-size:.6875rem;font-weight:600;color:#9ca3af;text-transform:uppercase;letter-spacing:.5px;background:#f8f9fb;border-bottom:1px solid #E5E7EB;white-space:nowrap}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;font-size:.8125rem;color:#111827;border-bottom:1px solid #F3F4F6;vertical-align:middle}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#4f46e50a}.text-muted[_ngcontent-%COMP%]{color:#6b7280}.state-loading[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:48px;color:#9ca3af}.state-loading[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:28px}.state-error[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:#ef44440f;border:1px solid rgba(239,68,68,.2);border-radius:8px;color:#ef4444;margin-bottom:24px;font-size:.8125rem}.state-error[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:18px;flex-shrink:0}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:48px;color:#9ca3af}.empty-state[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:40px;display:block;margin-bottom:12px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem}.pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;margin-top:24px}.pagination__info[_ngcontent-%COMP%]{font-size:.8125rem;color:#6b7280;min-width:60px;text-align:center}.tabs[_ngcontent-%COMP%]{display:flex;gap:2px;margin-bottom:24px;background:#f3f4f6;padding:3px;border-radius:8px;width:fit-content}.tab-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:6px 12px;border:none;border-radius:6px;background:transparent;color:#6b7280;font-family:Manrope,-apple-system,BlinkMacSystemFont,sans-serif;font-size:.8125rem;font-weight:500;cursor:pointer;transition:all .15s ease}.tab-btn[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:16px}.tab-btn[_ngcontent-%COMP%]:hover{background:#fff;color:#111827}.tab-btn--active[_ngcontent-%COMP%]{background:#fff;color:#4f46e5;font-weight:600;box-shadow:0 1px 2px #0000000d}.card[_ngcontent-%COMP%]{background:#fff;border:1px solid #E5E7EB;border-radius:12px;padding:24px;display:flex;flex-direction:column;gap:12px;margin-bottom:24px}.card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:.875rem;font-weight:600;color:#111827;margin:0}.card-title[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:18px;color:#6b7280}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.form-label[_ngcontent-%COMP%]{font-size:.8125rem;font-weight:500;color:#6b7280}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px}.form-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding-top:4px}.save-success[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;color:#22c55e;font-size:.8125rem;font-weight:500}.save-success[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:16px}.save-error[_ngcontent-%COMP%]{color:#ef4444;font-size:.8125rem}.icon-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:30px;height:30px;border:none;background:none;cursor:pointer;border-radius:4px;color:#6b7280;transition:background .15s ease,color .15s ease;flex-shrink:0}.icon-btn[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:18px}.icon-btn[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#111827}.icon-btn--danger[_ngcontent-%COMP%]:hover{background:#ef444414;color:#ef4444}.actions-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;white-space:nowrap}.link[_ngcontent-%COMP%]{color:#4f46e5;text-decoration:none;font-weight:500}.link[_ngcontent-%COMP%]:hover{color:#4338ca;text-decoration:underline}.section[_ngcontent-%COMP%]{margin-bottom:32px}.section-title[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#111827;margin:0 0 12px}.fw-semibold[_ngcontent-%COMP%]{font-weight:600}.status-select[_ngcontent-%COMP%]{background:#f8f9fb;border:1px solid #E5E7EB;border-radius:4px;color:#111827;font-size:.6875rem;font-family:Manrope,-apple-system,BlinkMacSystemFont,sans-serif;padding:3px 8px;cursor:pointer;outline:none;transition:border-color .15s ease}.status-select[_ngcontent-%COMP%]:hover{border-color:#d1d5db}.status-select[_ngcontent-%COMP%]:focus{border-color:#4f46e5;box-shadow:0 0 0 2px #4f46e514}.lot-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.lot-cell__image[_ngcontent-%COMP%]{width:44px;height:34px;border-radius:4px;background:#f3f4f6;display:flex;align-items:center;justify-content:center;overflow:hidden;flex-shrink:0}.lot-cell__image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.lot-cell__image[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:18px;color:#9ca3af}.lot-cell__name[_ngcontent-%COMP%]{font-size:.8125rem;font-weight:600;color:#111827}.lot-cell__id[_ngcontent-%COMP%]{font-size:.6875rem;color:#9ca3af}"]})};export{q as LotsPage};
