import{c as j,f as V,i as L,j as N,k as R,p as $}from"./chunk-NMP7FLI7.js";import{a as A}from"./chunk-PQRFCLHD.js";import{i as T}from"./chunk-Q2EY3VGC.js";import{$ as f,$a as h,Cb as B,Eb as F,Ma as E,Q as v,U as y,V as w,Ya as p,Za as g,_ as m,_a as S,ab as M,bb as _,cb as n,db as i,fb as b,ib as u,jb as l,pb as k,qb as o,rb as x,sb as O,tb as C,wa as s,wb as D,xb as z,yb as I}from"./chunk-PMJPP6QG.js";var P=class a{constructor(t){this.api=t}getDocuments(t={}){return this.api.get("/documents/all",{page:t.page??1,limit:t.limit??20,status:t.status})}updateStatus(t,e,r){return this.api.patch(`/documents/${t}/status`,{status:e,comment:r})}static \u0275fac=function(e){return new(e||a)(y(A))};static \u0275prov=v({token:a,factory:a.\u0275fac,providedIn:"root"})};var q=(a,t)=>t.id;function G(a,t){if(a&1&&(n(0,"option",7),o(1),i()),a&2){let e=t.$implicit,r=l();_("value",e),s(),x(r.statusLabels[e])}}function J(a,t){if(a&1&&(n(0,"div",8)(1,"span",10),o(2,"error"),i(),o(3),i()),a&2){let e=l();s(3),O(" ",e.error," ")}}function K(a,t){a&1&&(n(0,"div",9)(1,"span",11),o(2,"progress_activity"),i()())}function Q(a,t){if(a&1){let e=b();n(0,"button",24),u("click",function(){m(e);let c=l().$implicit,d=l(2);return f(d.approve(c))}),n(1,"span",10),o(2,"check"),i(),o(3," \u041E\u0434\u043E\u0431\u0440\u0438\u0442\u044C "),i(),n(4,"button",25),u("click",function(){m(e);let c=l().$implicit,d=l(2);return f(d.reject(c))}),n(5,"span",10),o(6,"close"),i(),o(7," \u041E\u0442\u043A\u043B\u043E\u043D\u0438\u0442\u044C "),i()}}function X(a,t){a&1&&(n(0,"span",19),o(1,"\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0430\u043D"),i())}function Z(a,t){if(a&1){let e=b();n(0,"tr")(1,"td",16)(2,"div",17),o(3),i(),n(4,"div")(5,"div",18),o(6),i(),n(7,"div",19),o(8),i()()(),n(9,"td"),o(10),i(),n(11,"td")(12,"button",20),u("click",function(){let c=m(e).$implicit,d=l(2);return f(d.openFile(c.fileUrl))}),n(13,"span",10),o(14,"open_in_new"),i(),o(15," \u041E\u0442\u043A\u0440\u044B\u0442\u044C "),i()(),n(16,"td")(17,"span",21),o(18),i()(),n(19,"td",22),o(20),B(21,"date"),i(),n(22,"td",23),p(23,Q,8,0)(24,X,2,0,"span",19),i()()}if(a&2){let e=t.$implicit,r=l(2);s(3),C(" ",e.user.firstName.charAt(0),"",e.user.lastName.charAt(0)," "),s(3),C("",e.user.firstName," ",e.user.lastName),s(2),x(e.user.email),s(2),x(r.getTypeLabel(e.type)),s(7),k(e.status==="approved"?"badge--green":e.status==="rejected"?"badge--red":"badge--amber"),s(),O(" ",r.getStatusLabel(e.status)," "),s(2),x(F(21,11,e.createdAt,"dd.MM.yy HH:mm")),s(3),g(e.status==="pending"?23:24)}}function ee(a,t){a&1&&(n(0,"div",14)(1,"span",10),o(2,"description"),i(),n(3,"p"),o(4,"\u0414\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u044B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B"),i()())}function te(a,t){if(a&1){let e=b();n(0,"div",15)(1,"button",26),u("click",function(){m(e);let c=l(2);return f(c.prevPage())}),n(2,"span",10),o(3,"chevron_left"),i()(),n(4,"span",27),o(5),i(),n(6,"button",26),u("click",function(){m(e);let c=l(2);return f(c.nextPage())}),n(7,"span",10),o(8,"chevron_right"),i()()()}if(a&2){let e=l(2);s(),_("disabled",e.page===1),s(4),C("",e.page," / ",e.totalPages),s(),_("disabled",e.page===e.totalPages)}}function ne(a,t){if(a&1&&(n(0,"div",12)(1,"table",13)(2,"thead")(3,"tr")(4,"th"),o(5,"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C"),i(),n(6,"th"),o(7,"\u0422\u0438\u043F"),i(),n(8,"th"),o(9,"\u0424\u0430\u0439\u043B"),i(),n(10,"th"),o(11,"\u0421\u0442\u0430\u0442\u0443\u0441"),i(),n(12,"th"),o(13,"\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D"),i(),n(14,"th"),o(15,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F"),i()()(),n(16,"tbody"),h(17,Z,25,14,"tr",null,q),i()()(),p(19,ee,5,0,"div",14),p(20,te,9,4,"div",15)),a&2){let e=l();s(17),M(e.documents),s(2),g(e.documents.length===0?19:-1),s(),g(e.totalPages>1?20:-1)}}var U={pending:"\u041D\u0430 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0435",approved:"\u041E\u0434\u043E\u0431\u0440\u0435\u043D",rejected:"\u041E\u0442\u043A\u043B\u043E\u043D\u0451\u043D"},W={passport:"\u041F\u0430\u0441\u043F\u043E\u0440\u0442",driver_license:"\u0412\u043E\u0434. \u0443\u0434\u043E\u0441\u0442\u043E\u0432\u0435\u0440\u0435\u043D\u0438\u0435",proof_of_address:"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u0430\u0434\u0440\u0435\u0441\u0430",other:"\u0414\u0440\u0443\u0433\u043E\u0435"},H=class a{documentsService=w(P);documents=[];loading=!0;error="";total=0;page=1;limit=20;filterStatus="pending";statusLabels=U;typeLabels=W;getStatusLabel(t){return U[t]??t}getTypeLabel(t){return W[t]??t}statuses=["","pending","approved","rejected"];ngOnInit(){this.load()}load(){this.loading=!0,this.error="",this.documentsService.getDocuments({page:this.page,limit:this.limit,status:this.filterStatus||void 0}).subscribe({next:t=>{this.documents=t.data,this.total=t.total,this.loading=!1},error:()=>{this.error="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u044B",this.loading=!1}})}onFilterChange(){this.page=1,this.load()}prevPage(){this.page>1&&(this.page--,this.load())}nextPage(){this.page*this.limit<this.total&&(this.page++,this.load())}get totalPages(){return Math.ceil(this.total/this.limit)}approve(t){this.documentsService.updateStatus(t.id,"approved").subscribe({next:e=>{let r=this.documents.findIndex(c=>c.id===e.id);r!==-1&&(this.documents[r]=e)}})}reject(t){let e=prompt("\u041F\u0440\u0438\u0447\u0438\u043D\u0430 \u043E\u0442\u043A\u043B\u043E\u043D\u0435\u043D\u0438\u044F (\u043D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E):")??void 0;this.documentsService.updateStatus(t.id,"rejected",e).subscribe({next:r=>{let c=this.documents.findIndex(d=>d.id===r.id);c!==-1&&(this.documents[c]=r)}})}openFile(t){window.open(t,"_blank")}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=E({type:a,selectors:[["app-documents"]],decls:15,vars:5,consts:[[1,"page"],[1,"page-header"],[1,"page-title"],[1,"page-count"],[1,"filters"],[1,"form-control","filters__select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value"],[1,"state-error"],[1,"state-loading"],[1,"material-symbols-rounded"],[1,"material-symbols-rounded","spin"],[1,"table-wrap"],[1,"data-table"],[1,"empty-state"],[1,"pagination"],[1,"user-cell"],[1,"user-avatar"],[1,"user-name"],[1,"text-muted",2,"font-size","var(--fs-xs)"],[1,"btn","btn--ghost","btn--sm",3,"click"],[1,"badge"],[1,"text-muted"],[1,"actions-cell"],[1,"btn","btn--sm","btn--primary",3,"click"],[1,"btn","btn--sm","btn--danger",3,"click"],[1,"btn","btn--secondary","btn--sm",3,"click","disabled"],[1,"pagination__info"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"\u0414\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u044B"),i(),n(4,"span",3),o(5),i()(),n(6,"div",4)(7,"select",5),I("ngModelChange",function(d){return z(r.filterStatus,d)||(r.filterStatus=d),d}),u("change",function(){return r.onFilterChange()}),n(8,"option",6),o(9,"\u0412\u0441\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u044B"),i(),h(10,G,2,2,"option",7,S),i()(),p(12,J,4,1,"div",8),p(13,K,3,0,"div",9),p(14,ne,21,2),i()),e&2&&(s(5),x(r.total),s(2),D("ngModel",r.filterStatus),s(3),M(r.statuses.slice(1)),s(2),g(r.error?12:-1),s(),g(r.loading?13:-1),s(),g(!r.loading&&!r.error?14:-1))},dependencies:[$,N,R,L,j,V,T],styles:[".page[_ngcontent-%COMP%]{padding:32px;max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:32px}.page-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#111827}.page-count[_ngcontent-%COMP%]{font-size:.8125rem;color:#6b7280;background:#f3f4f6;padding:2px 10px;border-radius:20px}.filters[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:24px;flex-wrap:wrap}.filters__search[_ngcontent-%COMP%]{flex:1;min-width:200px}.filters__select[_ngcontent-%COMP%]{min-width:160px;width:auto}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;background:#f8f9fb;color:#111827;font-family:Manrope,-apple-system,BlinkMacSystemFont,sans-serif;font-size:.875rem;border:1px solid #E5E7EB;border-radius:8px;transition:border-color .15s ease,box-shadow .15s ease;outline:none}.form-control[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.form-control[_ngcontent-%COMP%]:focus{border-color:#4f46e5;box-shadow:0 0 0 3px #4f46e514}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:8px 12px;border:none;border-radius:8px;font-family:Manrope,-apple-system,BlinkMacSystemFont,sans-serif;font-size:.8125rem;font-weight:600;cursor:pointer;transition:all .15s ease}.btn--primary[_ngcontent-%COMP%]{background:#4f46e5;color:#fff}.btn--primary[_ngcontent-%COMP%]:hover{background:#4338ca;box-shadow:0 4px 14px #4f46e540}.btn--primary[_ngcontent-%COMP%]:active{background:#3730a3}.btn--secondary[_ngcontent-%COMP%]{background:transparent;color:#111827;border:1px solid #E5E7EB}.btn--secondary[_ngcontent-%COMP%]:hover{border-color:#d1d5db;background:#f3f4f6}.btn--danger[_ngcontent-%COMP%]{background:#ef444414;color:#ef4444;border:1px solid rgba(239,68,68,.2)}.btn--danger[_ngcontent-%COMP%]:hover{background:#ef444426}.btn--ghost[_ngcontent-%COMP%]{background:none;color:#6b7280}.btn--ghost[_ngcontent-%COMP%]:hover{color:#111827;background:#f3f4f6}.btn--sm[_ngcontent-%COMP%]{padding:4px 10px;font-size:.6875rem}.btn--icon[_ngcontent-%COMP%]{padding:4px;background:none;color:#6b7280;border:none;border-radius:4px;display:flex;align-items:center}.btn--icon[_ngcontent-%COMP%]:hover{color:#111827;background:#f3f4f6}.btn--icon[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:18px}.btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.btn[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:16px;flex-shrink:0}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:2px 8px;border-radius:20px;font-size:.6875rem;font-weight:600}.badge--green[_ngcontent-%COMP%]{background:#22c55e1a;color:#1a9a49}.badge--red[_ngcontent-%COMP%]{background:#ef44441a;color:#ec1e1e}.badge--amber[_ngcontent-%COMP%]{background:#f59e0b1f;color:#c57f08}.badge--blue[_ngcontent-%COMP%]{background:#3b82f61a;color:#1469f4}.badge--gray[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280}.table-wrap[_ngcontent-%COMP%]{background:#fff;border:1px solid #E5E7EB;border-radius:16px;overflow:hidden;box-shadow:0 1px 2px #0000000d}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:8px 16px;text-align:left;font-size:.6875rem;font-weight:600;color:#9ca3af;text-transform:uppercase;letter-spacing:.5px;background:#f8f9fb;border-bottom:1px solid #E5E7EB;white-space:nowrap}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;font-size:.8125rem;color:#111827;border-bottom:1px solid #F3F4F6;vertical-align:middle}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#4f46e50a}.text-muted[_ngcontent-%COMP%]{color:#6b7280}.state-loading[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:48px;color:#9ca3af}.state-loading[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:28px}.state-error[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:#ef44440f;border:1px solid rgba(239,68,68,.2);border-radius:8px;color:#ef4444;margin-bottom:24px;font-size:.8125rem}.state-error[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:18px;flex-shrink:0}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:48px;color:#9ca3af}.empty-state[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:40px;display:block;margin-bottom:12px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem}.pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;margin-top:24px}.pagination__info[_ngcontent-%COMP%]{font-size:.8125rem;color:#6b7280;min-width:60px;text-align:center}.tabs[_ngcontent-%COMP%]{display:flex;gap:2px;margin-bottom:24px;background:#f3f4f6;padding:3px;border-radius:8px;width:fit-content}.tab-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:6px 12px;border:none;border-radius:6px;background:transparent;color:#6b7280;font-family:Manrope,-apple-system,BlinkMacSystemFont,sans-serif;font-size:.8125rem;font-weight:500;cursor:pointer;transition:all .15s ease}.tab-btn[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:16px}.tab-btn[_ngcontent-%COMP%]:hover{background:#fff;color:#111827}.tab-btn--active[_ngcontent-%COMP%]{background:#fff;color:#4f46e5;font-weight:600;box-shadow:0 1px 2px #0000000d}.card[_ngcontent-%COMP%]{background:#fff;border:1px solid #E5E7EB;border-radius:12px;padding:24px;display:flex;flex-direction:column;gap:12px;margin-bottom:24px}.card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:.875rem;font-weight:600;color:#111827;margin:0}.card-title[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:18px;color:#6b7280}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.form-label[_ngcontent-%COMP%]{font-size:.8125rem;font-weight:500;color:#6b7280}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px}.form-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding-top:4px}.save-success[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;color:#22c55e;font-size:.8125rem;font-weight:500}.save-success[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:16px}.save-error[_ngcontent-%COMP%]{color:#ef4444;font-size:.8125rem}.icon-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:30px;height:30px;border:none;background:none;cursor:pointer;border-radius:4px;color:#6b7280;transition:background .15s ease,color .15s ease;flex-shrink:0}.icon-btn[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:18px}.icon-btn[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#111827}.icon-btn--danger[_ngcontent-%COMP%]:hover{background:#ef444414;color:#ef4444}.actions-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;white-space:nowrap}.link[_ngcontent-%COMP%]{color:#4f46e5;text-decoration:none;font-weight:500}.link[_ngcontent-%COMP%]:hover{color:#4338ca;text-decoration:underline}.section[_ngcontent-%COMP%]{margin-bottom:32px}.section-title[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#111827;margin:0 0 12px}.fw-semibold[_ngcontent-%COMP%]{font-weight:600}.status-select[_ngcontent-%COMP%]{background:#f8f9fb;border:1px solid #E5E7EB;border-radius:4px;color:#111827;font-size:.6875rem;font-family:Manrope,-apple-system,BlinkMacSystemFont,sans-serif;padding:3px 8px;cursor:pointer;outline:none;transition:border-color .15s ease}.status-select[_ngcontent-%COMP%]:hover{border-color:#d1d5db}.status-select[_ngcontent-%COMP%]:focus{border-color:#4f46e5;box-shadow:0 0 0 2px #4f46e514}.user-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.user-avatar[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background:#4f46e514;color:#4f46e5;font-size:.6875rem;font-weight:700;display:flex;align-items:center;justify-content:center;flex-shrink:0;text-transform:uppercase}.user-name[_ngcontent-%COMP%]{font-size:.8125rem;font-weight:500;color:#111827}.user-email[_ngcontent-%COMP%]{font-size:.6875rem;color:#9ca3af;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:180px}"]})};export{H as DocumentsPage};
