import{a as V}from"./chunk-3AM2QGJF.js";import{b as z,c as I,f as N,o as U,p as T}from"./chunk-NMP7FLI7.js";import"./chunk-PQRFCLHD.js";import{j as D}from"./chunk-Q2EY3VGC.js";import{$ as g,$a as P,Cb as k,Db as F,Ma as O,V as y,Ya as p,Za as m,_ as u,ab as w,bb as v,cb as t,db as n,fb as M,ib as _,jb as d,pb as E,qb as i,rb as b,sb as f,tb as B,ub as S,wa as a,wb as x,xb as C,yb as h}from"./chunk-PMJPP6QG.js";var L=(r,o)=>o.id;function W(r,o){r&1&&(t(0,"span",17),i(1,"progress_activity"),n())}function j(r,o){if(r&1&&(t(0,"span",18),i(1),n()),r&2){let e=d(2);a(),b(e.createError)}}function q(r,o){if(r&1){let e=M();t(0,"div",5)(1,"h2",7),i(2,"\u041D\u043E\u0432\u044B\u0439 \u0431\u043E\u0442-\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C"),n(),t(3,"div",8)(4,"div",9)(5,"label",10),i(6,"Email *"),n(),t(7,"input",11),h("ngModelChange",function(l){u(e);let s=d();return C(s.newEmail,l)||(s.newEmail=l),g(l)}),n()(),t(8,"div",9)(9,"label",10),i(10,"\u0418\u043C\u044F *"),n(),t(11,"input",12),h("ngModelChange",function(l){u(e);let s=d();return C(s.newFirstName,l)||(s.newFirstName=l),g(l)}),n()(),t(12,"div",9)(13,"label",10),i(14,"\u0424\u0430\u043C\u0438\u043B\u0438\u044F *"),n(),t(15,"input",13),h("ngModelChange",function(l){u(e);let s=d();return C(s.newLastName,l)||(s.newLastName=l),g(l)}),n()(),t(16,"div",9)(17,"label",10),i(18,"\u0424\u043B\u0430\u0433 \u0441\u0442\u0440\u0430\u043D\u044B (emoji)"),n(),t(19,"input",14),h("ngModelChange",function(l){u(e);let s=d();return C(s.newCountryFlag,l)||(s.newCountryFlag=l),g(l)}),n()()(),t(20,"div",15)(21,"button",16),_("click",function(){u(e);let l=d();return g(l.createBot())}),p(22,W,2,0,"span",17),i(23," \u0421\u043E\u0437\u0434\u0430\u0442\u044C "),n(),p(24,j,2,1,"span",18),n()()}if(r&2){let e=d();a(7),x("ngModel",e.newEmail),a(4),x("ngModel",e.newFirstName),a(4),x("ngModel",e.newLastName),a(4),x("ngModel",e.newCountryFlag),a(2),v("disabled",e.creating||!e.newEmail||!e.newFirstName||!e.newLastName),a(),m(e.creating?22:-1),a(2),m(e.createError?24:-1)}}function G(r,o){r&1&&(t(0,"div",6)(1,"span",17),i(2,"progress_activity"),n()())}function H(r,o){r&1&&(t(0,"div",21)(1,"span",4),i(2,"smart_toy"),n(),t(3,"p"),i(4,"\u0411\u043E\u0442\u043E\u0432 \u043F\u043E\u043A\u0430 \u043D\u0435\u0442"),n()())}function J(r,o){if(r&1){let e=M();t(0,"div",23)(1,"div",27),i(2),n(),t(3,"div",28)(4,"div",29),i(5),n(),t(6,"div",30),i(7),n()(),t(8,"button",31),_("click",function(){let l=u(e).$implicit,s=d(2);return g(s.deleteBot(l.id))}),t(9,"span",4),i(10,"delete"),n()()()}if(r&2){let e=o.$implicit;a(2),b(e.countryFlag||"\u{1F916}"),a(3),B("",e.firstName," ",e.lastName),a(2),b(e.email)}}function K(r,o){r&1&&(t(0,"p",24),i(1," \u041A\u043E\u043D\u0444\u0438\u0433\u0438 \u0441\u043E\u0437\u0434\u0430\u044E\u0442\u0441\u044F \u043D\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0435 "),t(2,"a",32),i(3,"\u041F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0430\u0443\u043A\u0446\u0438\u043E\u043D\u043E\u0432"),n(),i(4,". "),n())}function Q(r,o){if(r&1){let e=M();t(0,"tr")(1,"td",24),i(2),n(),t(3,"td"),i(4),n(),t(5,"td"),i(6),k(7,"number"),n(),t(8,"td")(9,"span",33),i(10),n()(),t(11,"td")(12,"span",34),i(13),n()(),t(14,"td",35)(15,"button",36),_("click",function(){let l=u(e).$implicit,s=d(3);return g(s.toggleConfig(l))}),i(16),n(),t(17,"button",37),_("click",function(){let l=u(e).$implicit,s=d(3);return g(s.deleteConfig(l.id))}),t(18,"span",4),i(19,"delete"),n()()()()}if(r&2){let e=o.$implicit;a(2),f(" ",(e.lot==null?null:e.lot.title)??e.lotId.slice(0,8)+"\u2026"," "),a(2),S(" ",(e.botUser==null?null:e.botUser.firstName)??"\u2014"," ",(e.botUser==null?null:e.botUser.lastName)??""," ",(e.botUser==null?null:e.botUser.countryFlag)??""," "),a(2),f("\u20AC",F(7,12,e.maxPrice)),a(4),b(e.pattern),a(2),E(e.isActive?"badge--green":"badge--gray"),a(),f(" ",e.isActive?"\u0410\u043A\u0442\u0438\u0432\u0435\u043D":"\u041E\u0442\u043A\u043B\u044E\u0447\u0451\u043D"," "),a(2),E(e.isActive?"btn--secondary":"btn--primary"),a(),f(" ",e.isActive?"\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C":"\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C"," ")}}function R(r,o){if(r&1&&(t(0,"table",26)(1,"thead")(2,"tr")(3,"th"),i(4,"\u041B\u043E\u0442"),n(),t(5,"th"),i(6,"\u0411\u043E\u0442"),n(),t(7,"th"),i(8,"\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430"),n(),t(9,"th"),i(10,"\u041F\u0430\u0442\u0442\u0435\u0440\u043D"),n(),t(11,"th"),i(12,"\u0421\u0442\u0430\u0442\u0443\u0441"),n(),t(13,"th"),i(14,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F"),n()()(),t(15,"tbody"),P(16,Q,20,14,"tr",null,L),n()()),r&2){let e=d(2);a(16),w(e.configs)}}function X(r,o){if(r&1&&(t(0,"section",19)(1,"h2",20),i(2),n(),p(3,H,5,0,"div",21),t(4,"div",22),P(5,J,11,4,"div",23,L),n()(),t(7,"section",19)(8,"h2",20),i(9),n(),p(10,K,5,0,"p",24),t(11,"div",25),p(12,R,18,0,"table",26),n()()),r&2){let e=d();a(2),f("\u041F\u0440\u043E\u0444\u0438\u043B\u0438 \u0431\u043E\u0442\u043E\u0432 (",e.botUsers.length,")"),a(),m(e.botUsers.length===0?3:-1),a(2),w(e.botUsers),a(4),f("\u0410\u043A\u0442\u0438\u0432\u043D\u044B\u0435 \u043A\u043E\u043D\u0444\u0438\u0433\u0438 (",e.configs.length,")"),a(),m(e.configs.length===0?10:-1),a(2),m(e.configs.length>0?12:-1)}}var A=class r{botService=y(V);botUsers=[];configs=[];loading=!0;showCreateForm=!1;newEmail="";newFirstName="";newLastName="";newCountryFlag="";creating=!1;createError="";ngOnInit(){this.load()}load(){this.loading=!0,this.botService.getBotUsers().subscribe({next:o=>{this.botUsers=o,this.botService.getConfigs().subscribe({next:e=>{this.configs=e,this.loading=!1},error:()=>this.loading=!1})},error:()=>this.loading=!1})}createBot(){!this.newEmail||!this.newFirstName||!this.newLastName||(this.creating=!0,this.createError="",this.botService.createBotUser({email:this.newEmail,firstName:this.newFirstName,lastName:this.newLastName,countryFlag:this.newCountryFlag||void 0}).subscribe({next:o=>{this.botUsers=[o,...this.botUsers],this.newEmail="",this.newFirstName="",this.newLastName="",this.newCountryFlag="",this.showCreateForm=!1,this.creating=!1},error:o=>{this.createError=o?.error?.message??"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F",this.creating=!1}}))}deleteBot(o){this.botService.deleteBotUser(o).subscribe({next:()=>{this.botUsers=this.botUsers.filter(e=>e.id!==o),this.configs=this.configs.filter(e=>e.botUserId!==o)}})}toggleConfig(o){this.botService.updateConfig(o.id,{isActive:!o.isActive}).subscribe({next:e=>{let c=this.configs.findIndex(l=>l.id===o.id);c!==-1&&(this.configs[c]=e)}})}deleteConfig(o){this.botService.deleteConfig(o).subscribe({next:()=>{this.configs=this.configs.filter(e=>e.id!==o)}})}configsForBot(o){return this.configs.filter(e=>e.botUserId===o)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=O({type:r,selectors:[["app-bots"]],decls:11,vars:5,consts:[[1,"page"],[1,"page-header"],[1,"page-title"],[1,"btn","btn--primary","btn--sm",3,"click"],[1,"material-symbols-rounded"],[1,"card","create-form"],[1,"state-loading"],[1,"card-title"],[1,"form-grid"],[1,"form-group"],[1,"form-label"],["placeholder","bot@example.com","type","email",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","\u0418\u0432\u0430\u043D",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","\u041F\u0435\u0442\u0440\u043E\u0432",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","\u{1F1E9}\u{1F1EA}","maxlength","8",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-actions"],[1,"btn","btn--primary","btn--sm",3,"click","disabled"],[1,"material-symbols-rounded","spin"],[1,"save-error"],[1,"section"],[1,"section-title"],[1,"empty-state"],[1,"bot-grid"],[1,"bot-card","card"],[1,"text-muted"],[1,"table-wrap"],[1,"data-table"],[1,"bot-card__avatar"],[1,"bot-card__info"],[1,"bot-card__name"],[1,"bot-card__email","text-muted"],["title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0431\u043E\u0442\u0430",1,"icon-btn","icon-btn--danger",3,"click"],["href","/auctions/schedule",1,"link"],[1,"badge","badge--gray"],[1,"badge"],[1,"actions-cell"],[1,"btn","btn--sm",3,"click"],["title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C",1,"icon-btn","icon-btn--danger",3,"click"]],template:function(e,c){e&1&&(t(0,"div",0)(1,"div",1)(2,"h1",2),i(3,"\u0422\u043E\u0440\u0433\u043E\u0432\u044B\u0435 \u0431\u043E\u0442\u044B"),n(),t(4,"button",3),_("click",function(){return c.showCreateForm=!c.showCreateForm}),t(5,"span",4),i(6),n(),i(7),n()(),p(8,q,25,7,"div",5),p(9,G,3,0,"div",6),p(10,X,13,5),n()),e&2&&(a(6),b(c.showCreateForm?"close":"add"),a(),f(" ",c.showCreateForm?"\u041E\u0442\u043C\u0435\u043D\u0430":"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0431\u043E\u0442\u0430"," "),a(),m(c.showCreateForm?8:-1),a(),m(c.loading?9:-1),a(),m(c.loading?-1:10))},dependencies:[T,z,I,U,N,D],styles:[".page[_ngcontent-%COMP%]{padding:32px;max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:32px}.page-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#111827}.page-count[_ngcontent-%COMP%]{font-size:.8125rem;color:#6b7280;background:#f3f4f6;padding:2px 10px;border-radius:20px}.filters[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:24px;flex-wrap:wrap}.filters__search[_ngcontent-%COMP%]{flex:1;min-width:200px}.filters__select[_ngcontent-%COMP%]{min-width:160px;width:auto}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;background:#f8f9fb;color:#111827;font-family:Manrope,-apple-system,BlinkMacSystemFont,sans-serif;font-size:.875rem;border:1px solid #E5E7EB;border-radius:8px;transition:border-color .15s ease,box-shadow .15s ease;outline:none}.form-control[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.form-control[_ngcontent-%COMP%]:focus{border-color:#4f46e5;box-shadow:0 0 0 3px #4f46e514}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:8px 12px;border:none;border-radius:8px;font-family:Manrope,-apple-system,BlinkMacSystemFont,sans-serif;font-size:.8125rem;font-weight:600;cursor:pointer;transition:all .15s ease}.btn--primary[_ngcontent-%COMP%]{background:#4f46e5;color:#fff}.btn--primary[_ngcontent-%COMP%]:hover{background:#4338ca;box-shadow:0 4px 14px #4f46e540}.btn--primary[_ngcontent-%COMP%]:active{background:#3730a3}.btn--secondary[_ngcontent-%COMP%]{background:transparent;color:#111827;border:1px solid #E5E7EB}.btn--secondary[_ngcontent-%COMP%]:hover{border-color:#d1d5db;background:#f3f4f6}.btn--danger[_ngcontent-%COMP%]{background:#ef444414;color:#ef4444;border:1px solid rgba(239,68,68,.2)}.btn--danger[_ngcontent-%COMP%]:hover{background:#ef444426}.btn--ghost[_ngcontent-%COMP%]{background:none;color:#6b7280}.btn--ghost[_ngcontent-%COMP%]:hover{color:#111827;background:#f3f4f6}.btn--sm[_ngcontent-%COMP%]{padding:4px 10px;font-size:.6875rem}.btn--icon[_ngcontent-%COMP%]{padding:4px;background:none;color:#6b7280;border:none;border-radius:4px;display:flex;align-items:center}.btn--icon[_ngcontent-%COMP%]:hover{color:#111827;background:#f3f4f6}.btn--icon[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:18px}.btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.btn[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:16px;flex-shrink:0}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:2px 8px;border-radius:20px;font-size:.6875rem;font-weight:600}.badge--green[_ngcontent-%COMP%]{background:#22c55e1a;color:#1a9a49}.badge--red[_ngcontent-%COMP%]{background:#ef44441a;color:#ec1e1e}.badge--amber[_ngcontent-%COMP%]{background:#f59e0b1f;color:#c57f08}.badge--blue[_ngcontent-%COMP%]{background:#3b82f61a;color:#1469f4}.badge--gray[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280}.table-wrap[_ngcontent-%COMP%]{background:#fff;border:1px solid #E5E7EB;border-radius:16px;overflow:hidden;box-shadow:0 1px 2px #0000000d}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:8px 16px;text-align:left;font-size:.6875rem;font-weight:600;color:#9ca3af;text-transform:uppercase;letter-spacing:.5px;background:#f8f9fb;border-bottom:1px solid #E5E7EB;white-space:nowrap}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;font-size:.8125rem;color:#111827;border-bottom:1px solid #F3F4F6;vertical-align:middle}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#4f46e50a}.text-muted[_ngcontent-%COMP%]{color:#6b7280}.state-loading[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:48px;color:#9ca3af}.state-loading[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:28px}.state-error[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:#ef44440f;border:1px solid rgba(239,68,68,.2);border-radius:8px;color:#ef4444;margin-bottom:24px;font-size:.8125rem}.state-error[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:18px;flex-shrink:0}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:48px;color:#9ca3af}.empty-state[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:40px;display:block;margin-bottom:12px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem}.pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;margin-top:24px}.pagination__info[_ngcontent-%COMP%]{font-size:.8125rem;color:#6b7280;min-width:60px;text-align:center}.tabs[_ngcontent-%COMP%]{display:flex;gap:2px;margin-bottom:24px;background:#f3f4f6;padding:3px;border-radius:8px;width:fit-content}.tab-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:6px 12px;border:none;border-radius:6px;background:transparent;color:#6b7280;font-family:Manrope,-apple-system,BlinkMacSystemFont,sans-serif;font-size:.8125rem;font-weight:500;cursor:pointer;transition:all .15s ease}.tab-btn[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:16px}.tab-btn[_ngcontent-%COMP%]:hover{background:#fff;color:#111827}.tab-btn--active[_ngcontent-%COMP%]{background:#fff;color:#4f46e5;font-weight:600;box-shadow:0 1px 2px #0000000d}.card[_ngcontent-%COMP%]{background:#fff;border:1px solid #E5E7EB;border-radius:12px;padding:24px;display:flex;flex-direction:column;gap:12px;margin-bottom:24px}.card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:.875rem;font-weight:600;color:#111827;margin:0}.card-title[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:18px;color:#6b7280}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.form-label[_ngcontent-%COMP%]{font-size:.8125rem;font-weight:500;color:#6b7280}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px}.form-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding-top:4px}.save-success[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;color:#22c55e;font-size:.8125rem;font-weight:500}.save-success[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:16px}.save-error[_ngcontent-%COMP%]{color:#ef4444;font-size:.8125rem}.icon-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:30px;height:30px;border:none;background:none;cursor:pointer;border-radius:4px;color:#6b7280;transition:background .15s ease,color .15s ease;flex-shrink:0}.icon-btn[_ngcontent-%COMP%]   .material-symbols-rounded[_ngcontent-%COMP%]{font-size:18px}.icon-btn[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#111827}.icon-btn--danger[_ngcontent-%COMP%]:hover{background:#ef444414;color:#ef4444}.actions-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;white-space:nowrap}.link[_ngcontent-%COMP%]{color:#4f46e5;text-decoration:none;font-weight:500}.link[_ngcontent-%COMP%]:hover{color:#4338ca;text-decoration:underline}.section[_ngcontent-%COMP%]{margin-bottom:32px}.section-title[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#111827;margin:0 0 12px}.fw-semibold[_ngcontent-%COMP%]{font-weight:600}.status-select[_ngcontent-%COMP%]{background:#f8f9fb;border:1px solid #E5E7EB;border-radius:4px;color:#111827;font-size:.6875rem;font-family:Manrope,-apple-system,BlinkMacSystemFont,sans-serif;padding:3px 8px;cursor:pointer;outline:none;transition:border-color .15s ease}.status-select[_ngcontent-%COMP%]:hover{border-color:#d1d5db}.status-select[_ngcontent-%COMP%]:focus{border-color:#4f46e5;box-shadow:0 0 0 2px #4f46e514}.create-form[_ngcontent-%COMP%]{margin-bottom:24px}.bot-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:8px}.bot-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:14px 12px}.bot-card__avatar[_ngcontent-%COMP%]{font-size:24px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.bot-card__info[_ngcontent-%COMP%]{flex:1;min-width:0}.bot-card__name[_ngcontent-%COMP%]{font-weight:500;font-size:.8125rem;color:#111827}.bot-card__email[_ngcontent-%COMP%]{font-size:.6875rem;color:#9ca3af;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})};export{A as BotsPage};
